<?php
/** @var  $installer Mage_Core_Model_Resource_Setup */
Mage::log('IM IN THE INSTALLER', null, "install.log");
$installer = $this;
$installer->startSetup();

$installSql = "

DROP TABLE IF EXISTS {$installer->getTable('mediotype_tutorials/tutorial')};

CREATE TABLE `{$installer->getTable('mediotype_tutorials/tutorial')}` (
`id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `label` varchar(255) DEFAULT NULL,
  `category` varchar(255) DEFAULT NULL,
  `description` blob,
  `keywords` varchar(255) DEFAULT NULL,
  PRIMARY KEY(`id`)
) ENGINE = InnoDB AUTO_INCREMENT = 1 DEFAULT CHARSET = latin1;

DROP TABLE IF EXISTS {$installer->getTable('mediotype_tutorials/page')};
CREATE TABLE `{$installer->getTable('mediotype_tutorials/page')}` (
`id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `tutorial_id` int(11) DEFAULT NULL,
  `url_key` varchar(255) DEFAULT NULL,
  `use_expose` int(1) DEFAULT NULL,
  `params` varchar(255) DEFAULT NULL,
  `pre_page_callback` text,
  `post_page_callback` text,
  PRIMARY KEY(`id`)
) ENGINE = InnoDB AUTO_INCREMENT = 1 DEFAULT CHARSET = latin1;

DROP TABLE IF EXISTS {$installer->getTable('mediotype_tutorials/step')};

CREATE TABLE `{$installer->getTable('mediotype_tutorials/step')}` (
`id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `page_id` int(11) DEFAULT NULL,
  `target_element_id` varchar(255) DEFAULT NULL,
  `pre_step_callback` blob,
  `post_step_callback` blob,
  `step_title` varchar(255) DEFAULT NULL,
  `step_content` blob,
  `tip_location` varchar(255) DEFAULT 'bottom',
  PRIMARY KEY(`id`),
  KEY `tutorial_id` (`page_id`)
) ENGINE = InnoDB AUTO_INCREMENT = 1 DEFAULT CHARSET = latin1;

INSERT INTO `mediotype_tutorials` (`id`, `label`, `category`, `description`, `keywords`)
VALUES
	(7,'Order Processing','Sales','',NULL),
	(8,'Invoicing & Refunds','Sales','',NULL);

INSERT INTO `mediotype_tutorials_pages` (`id`, `tutorial_id`, `url_key`, `use_expose`, `params`, `pre_page_callback`, `post_page_callback`)
VALUES
	(86,7,'adminhtml/sales_order/index',1,NULL,NULL,NULL),
	(87,7,'adminhtml/sales_order/view',1,'order_id/1','$(\'.status-wizard\').scope().currentStepNumber = 1;\r\n$(\'.status-wizard\').scope().$apply();',NULL),
	(97,8,'adminhtml/sales_order/index',NULL,NULL,NULL,NULL),
	(98,8,'adminhtml/sales_order/view',1,'order_id/1','$(\'.status-wizard\').scope().currentStepNumber = 4;\r\n$(\'.status-wizard\').scope().$apply();',NULL);

INSERT INTO `mediotype_tutorials_steps` (`id`, `page_id`, `target_element_id`, `pre_step_callback`, `post_step_callback`, `step_title`, `step_content`, `tip_location`)
VALUES
	(739,86,NULL,'','','Order Processing',X'57656C636F6D6520746F20746865206F726465722070726F63657373696E67207475746F7269616C2E20496E2074686973207475746F7269616C20796F752077696C6C206C6561726E20686F7720746F2066696C74657220616E6420736F7274206F72646572732C20726576696577207468656D2C207072696E7420646F63756D656E74732C20616E642072656C6561736520746F2070726F64756374696F6E2E','bottom'),
	(740,86,NULL,'','',NULL,X'54686973206973207468652053616C6573203E204F72646572732073637265656E','bottom'),
	(741,86,'html>body>div:nth-child(1)>div>div:nth-child(2)>div:nth-child(2)>div:nth-child(3)>ul>li:nth-child(4)>ul>li:nth-child(1)>a>span',X'242827236E6176206C692E6C6576656C303A6E74682D6368696C6428342927292E616464436C61737328276F76657227292E63737328277A2D696E646578272C2031303030293B',X'242827236E6176206C692E6C6576656C303A6E74682D6368696C6428342927292E72656D6F7665436C61737328276F76657227293B',NULL,X'596F752063616E20676574206261636B206865726520616E792074696D65206279206E617669676174696E6720746F2053616C6573203E204F72646572732E','right'),
	(742,86,'#anchor-content','','',NULL,X'5468697320697320746865202253616C6573204F72646572732047726964222E2057697468206F757420616E792066696C74657273206170706C6965642C207468697320677269642077696C6C2073686F7720616C6C206F7264657273207468617420686176652065766572206265656E20706C6163656420696E20746869732073746F72652E20','bottom'),
	(743,86,'.filter','','','Filters',X'5573652074686573652066696C7465727320746F2068656C702066696E64206F726465727320627920746865204F7264657220232C2044617465205075726368617365642C2042696C6C696E6720616E64205368697070696E67204E616D652C204F7264657220546F74616C2072616E6765732C20616E64206F7264657220737461747573','right'),
	(744,86,'html>body>div:nth-child(1)>div>div:nth-child(2)>div:nth-child(5)>div>div:nth-child(3)>div:nth-child(2)>div:nth-child(3)>div>table>thead>tr:nth-child(2)>th:nth-child(8)','','','Order status',X'4D6F7374206F66207468652074696D6520796F752077696C6C206265207573696E6720746865207374617475732066696C74657220746F2066696E64206E6577206F72646572732E204E6577206F72646572732068617665206120737461747573206F66202250656E64696E6722','left'),
	(745,86,'.filter-actions button:nth-child(2)','','',NULL,X'416674657220796F7520636F6E66696775726520796F75722066696C7465727320636C69636B2074686520225365617263682220627574746F6E20746F206170706C79207468656D','left'),
	(746,86,'html>body>div:nth-child(1)>div>div:nth-child(2)>div:nth-child(5)>div>div:nth-child(3)>div:nth-child(1)>ul>li:nth-child(2)>button','','',NULL,X'546F20736176652074696D652C207072657365742066696C746572732068617665206265656E206372656174656420666F7220796F752E','right'),
	(747,86,'.filter-actions button:nth-child(1)','','',NULL,X'546F20636C656172207468652066696C7465727320636C69636B20746865202252657365742046696C7465722220627574746F6E','left'),
	(748,86,'html>body>div:nth-child(1)>div>div:nth-child(2)>div:nth-child(5)>div>div:nth-child(3)>div:nth-child(2)>table>tbody>tr>td:nth-child(1)','','','Paging',X'42792064656661756C7420746865206F7264657220677269642077696C6C20646973706C6179203230206F726465727320617420612074696D652E20546F2076696577206D6F7265206F7264657273206174206F6E6365206F72206368616E6765206265747765656E2070616765732075736520746865736520627574746F6E732E','top'),
	(749,86,'html>body>div:nth-child(1)>div>div:nth-child(2)>div:nth-child(5)>div>div:nth-child(3)>div:nth-child(2)>div:nth-child(3)>div>table>tbody>tr','','',NULL,X'4F6E636520796F75206861766520666F756E6420746865206F7264657220796F752077616E7420746F2070726F636573732C20636C69636B2074686520726F7720746F20676F20746F2074686520224F726465722044657461696C73222070616765','bottom'),
	(750,87,NULL,'','',NULL,X'546869732069732074686520224F726465722044657461696C73222C2066726F6D2074686973207061676520796F752063616E2052657669657720616E6420417070726F766520616E206F726465722C207072696E7420646F63756D656E747320616E64206D756368206D6F72652E','bottom'),
	(751,87,'.side-col','','',NULL,X'546865736520617265207468652073696465206E617669676174696F6E202254616273222E2046726F6D206865726520796F752063616E206E6176696761746520746F206D6F72652064657461696C656420696E666F726D6174696F6E2E','right'),
	(752,87,'.status-wizard','','','Status Wizard',X'5468697320617265612077696C6C2073686F7720796F75206174206120676C616E63652077686174207068617365206F662070726F63657373696E6720746865206F7264657220697320696E2E','bottom'),
	(753,87,'ul.small-block-grid-4:nth-child(4) > li:nth-child(1)','','','Document Generation',X'5768656E20616E206F7264657220697320666972737420706C616365642C2069742077696C6C2062652070757420696E746F206120686F6C64696E67207374617465207768696C652074686520776F726B206F7264657220646F63756D656E747320617265206265696E672067656E6572617465642E20','bottom'),
	(754,87,'ul.small-block-grid-4:nth-child(4) > li:nth-child(1)',X'242827756C2E736D616C6C2D626C6F636B2D677269642D343A6E74682D6368696C64283429203E206C693A6E74682D6368696C64283129203E206127292E616464436C6173732827616C65727427293B',X'242827756C2E736D616C6C2D626C6F636B2D677269642D343A6E74682D6368696C64283429203E206C693A6E74682D6368696C64283129203E206127292E72656D6F7665436C6173732827616C65727427293B','Errors',X'496620746865726520697320616E206572726F7220647572696E6720646F63756D656E742067656E65726174696F6E2074686973206C6162656C2077696C6C207475726E207265642E20496620746869732068617070656E732C2049542077696C6C206175746F6D61746963616C6C79206265206E6F7469666965642C2062757420796F752063616E20636C69636B206F6E2074686520627574746F6E20746F20617474656D707420746F20227265747279222E','bottom'),
	(755,87,'ul.small-block-grid-4:nth-child(4) > li:nth-child(2)',X'2428272E7374617475732D77697A61726427292E73636F706528292E63757272656E74537465704E756D626572203D20323B0D0A2428272E7374617475732D77697A61726427292E73636F706528292E246170706C7928293B','','Awaiting Approval',X'4F6E636520616C6C206F662074686520646F63756D656E74732068617665206265656E2067656E6572617465642C20746865206F726465722077696C6C2062652070757420696E746F206120224177616974696E6720417070726F76616C2220737461747573','bottom'),
	(756,87,'.preview-customized-bundle','','',NULL,X'596F752063616E20707265766965772065616368206F662074686520637573746F6D697A6564206974656D7320627920636C69636B696E67207468697320627574746F6E2E2020','bottom'),
	(757,87,'.add-order-note','','',NULL,X'436C69636B207468697320627574746F6E20746F206164642061206E6F746520746F20746865206F72646572206F72206D616E75616C6C79206368616E676520746865206F72646572207374617475732E','bottom'),
	(758,87,'.mark-approved',X'2428272E7374617475732D77697A61726427292E73636F706528292E63757272656E74537465704E756D626572203D20323B0D0A2428272E7374617475732D77697A61726427292E73636F706528292E246170706C7928293B',X'2428272E7374617475732D77697A61726427292E73636F706528292E63757272656E74537465704E756D626572203D20333B0D0A2428272E7374617475732D77697A61726427292E73636F706528292E246170706C7928293B',NULL,X'4F6E636520796F7520686176652072657669657765642074686520637573746F6D697A65642070726F64756374732C20636C69636B207468697320627574746F6E20746F2072656C6561736520746865206F7264657220746F2070726F64756374696F6E2E','bottom'),
	(759,87,'ul.small-block-grid-4:nth-child(4) > li:nth-child(3)','','',NULL,X'4F6E636520796F7520686176652072656C656173656420616E206F7264657220746F2070726F64756374696F6E20746865206F726465722077696C6C2062652070757420696E746F20746865202250726F63657373696E67222073746174652E','bottom'),
	(760,87,'[data-reveal-id=\'ckb_print_dialog\']','','',NULL,X'546F207072696E742074686520776F726B206F7264657220646F63756D656E74732C20636C69636B207468697320627574746F6E2E','bottom'),
	(761,87,'#ckb_print_dialog',X'24282723636B625F7072696E745F6469616C6F6727292E666F756E646174696F6E282772657665616C272C276F70656E272C207B20616E696D6174696F6E3A206E756C6C207D20293B0D0A2428272E72657665616C2D6D6F64616C2D626727292E63737328277A2D696E646578272C203130293B','',NULL,X'5468697320697320746865207072696E74206469616C6F672077696E646F772E204865726520796F752063616E2073656520616C6C206F662074686520646F63756D656E747320746861742068617665206265656E2067656E65726174656420666F722074686973206F72646572','bottom'),
	(762,87,'tr.ng-scope:nth-child(2) > td:nth-child(5)','','',NULL,X'4261736564206F6E207468652073697A65206F662074686520646F63756D656E7420616E6420796F757220776F726B206C6F636174696F6E2C2074686520636F7272656374207072696E7465727320666F7220796F757220646F63756D656E742073686F756C64206175746F6D61746963616C6C792062652073656C65637465642E','bottom'),
	(763,87,'button.right','',X'24282723636B625F7072696E745F6469616C6F6727292E666F756E646174696F6E282772657665616C272C27636C6F73652729',NULL,X'416674657220796F75206861766520636F6E6669726D65642074686520617070726F70726961746520616374696F6E20666F72206561636820646F63756D656E742C20636C69636B207468697320627574746F6E20746F207072696E742E','left'),
	(764,87,'ul.small-block-grid-4:nth-child(4) > li:nth-child(3)','','',NULL,X'447572696E6720746865206D616E75666163747572696E672070726F6365737320746865206F726465722077696C6C2072656D61696E20696E20746865202250726F63657373696E67222073746174652E','bottom'),
	(765,87,'ul.small-block-grid-4:nth-child(4) > li:nth-child(3)',X'2428272E7374617475732D77697A61726427292E73636F706528292E63757272656E74537465704E756D626572203D20343B0D0A2428272E7374617475732D77697A61726427292E73636F706528292E246170706C7928293B','',NULL,X'4F6E636520746865206D616E75666163747572696E672070726F6365737320697320636F6D706C6574656420616E6420746865206F726465722068617320736869707065642C20746865206F726465722077696C6C206D6F766520746F207468652022436F6D706C65746564222073746174652E20','bottom'),
	(766,87,NULL,'','',NULL,X'5468697320636F6D706C6574657320746865206261736963206F726465722070726F63657373696E67207475746F7269616C2E','bottom'),
	(828,97,NULL,'','','Invoicing & Refunds',X'57656C636F6D6520746F2074686520496E766F6963696E67202620526566756E6473207475746F7269616C2E20496E2074686973207475746F7269616C20796F752077696C6C206C6561726E20686F7720746F206E6176696761746520746865206F726465727320677269642C206F70656E20616E206F726465722C2063726561746520696E766F6963657320746F2063617074757265207061796D656E74732C20616E6420686F7720746F2063726561746520637265646974206D656D6F7320666F7220726566756E64732E','bottom'),
	(829,97,NULL,'','',NULL,X'54686973206973207468652053616C6573203E204F72646572732073637265656E','bottom'),
	(830,97,'html>body>div:nth-child(1)>div>div:nth-child(2)>div:nth-child(2)>div:nth-child(3)>ul>li:nth-child(4)>ul>li:nth-child(1)>a>span',X'242827236E6176206C692E6C6576656C303A6E74682D6368696C6428342927292E616464436C61737328276F76657227292E63737328277A2D696E646578272C2031303030293B',X'242827236E6176206C692E6C6576656C303A6E74682D6368696C6428342927292E72656D6F7665436C61737328276F76657227293B',NULL,X'596F752063616E20676574206261636B206865726520616E792074696D65206279206E617669676174696E6720746F2053616C6573203E204F72646572732E','right'),
	(831,97,'#anchor-content','','',NULL,X'5468697320697320746865202253616C6573204F72646572732047726964222E2057697468206F757420616E792066696C74657273206170706C6965642C207468697320677269642077696C6C2073686F7720616C6C206F7264657273207468617420686176652065766572206265656E20706C6163656420696E20746869732073746F72652E20','bottom'),
	(832,97,'.filter','','','Filters',X'5573652074686573652066696C7465727320746F2068656C702066696E64206F726465727320627920746865204F7264657220232C2044617465205075726368617365642C2042696C6C696E6720616E64205368697070696E67204E616D652C204F7264657220546F74616C2072616E6765732C20616E64206F7264657220737461747573','right'),
	(833,97,'html>body>div:nth-child(1)>div>div:nth-child(2)>div:nth-child(5)>div>div:nth-child(3)>div:nth-child(2)>div:nth-child(3)>div>table>thead>tr:nth-child(2)>th:nth-child(8)','','','Order status',X'4D6F7374206F66207468652074696D6520796F752077696C6C206265207573696E6720746865207374617475732066696C74657220746F2066696E64206F726465727320746861742068617665206265656E20636F6D706C657465642E','left'),
	(834,97,'.filter-actions button:nth-child(2)','','',NULL,X'416674657220796F7520636F6E66696775726520796F75722066696C7465727320636C69636B2074686520225365617263682220627574746F6E20746F206170706C79207468656D','left'),
	(835,97,'html>body>div:nth-child(1)>div>div:nth-child(2)>div:nth-child(5)>div>div:nth-child(3)>div:nth-child(1)>ul>li:nth-child(2)>button','','',NULL,X'546F20736176652074696D652C207072657365742066696C746572732068617665206265656E206372656174656420666F7220796F752E','right'),
	(836,97,'.filter-actions button:nth-child(1)','','',NULL,X'546F20636C656172207468652066696C7465727320636C69636B20746865202252657365742046696C7465722220627574746F6E','left'),
	(837,97,'html>body>div:nth-child(1)>div>div:nth-child(2)>div:nth-child(5)>div>div:nth-child(3)>div:nth-child(2)>table>tbody>tr>td:nth-child(1)','','','Paging',X'42792064656661756C7420746865206F7264657220677269642077696C6C20646973706C6179203230206F726465727320617420612074696D652E20546F2076696577206D6F7265206F7264657273206174206F6E6365206F72206368616E6765206265747765656E2070616765732075736520746865736520627574746F6E732E','top'),
	(838,97,'html>body>div:nth-child(1)>div>div:nth-child(2)>div:nth-child(5)>div>div:nth-child(3)>div:nth-child(2)>div:nth-child(3)>div>table>tbody>tr','','',NULL,X'4F6E636520796F75206861766520666F756E6420746865206F7264657220796F752077616E7420746F2070726F636573732C20636C69636B2074686520726F7720746F20676F20746F2074686520224F726465722044657461696C73222070616765','bottom'),
	(839,98,NULL,'','',NULL,X'546869732069732074686520224F726465722044657461696C73222C2066726F6D2074686973207061676520796F752063616E2052657669657720616E6420417070726F766520616E206F726465722C207072696E7420646F63756D656E747320616E64206D756368206D6F72652E','bottom'),
	(840,98,'.side-col','','',NULL,X'546865736520617265207468652073696465206E617669676174696F6E202254616273222E2046726F6D206865726520796F752063616E206E6176696761746520746F206D6F72652064657461696C656420696E666F726D6174696F6E2E','right'),
	(841,98,'.status-wizard','','','Status Wizard',X'5468697320617265612077696C6C2073686F7720796F75206174206120676C616E63652077686174207068617365206F662070726F63657373696E6720746865206F7264657220697320696E2E','bottom'),
	(842,98,'html>body>div:nth-child(2)>div>div:nth-child(2)>div:nth-child(5)>div>div>div:nth-child(2)>div>div:nth-child(3)>div:nth-child(1)>div:nth-child(1)>div:nth-child(2)>ul:nth-child(4)>li:nth-child(4)>a','','',NULL,X'4F6E636520746865206D616E75666163747572696E672070726F6365737320697320636F6D706C6574656420616E64207468652070726F64756374732068617665207368697070656420746865206F726465722077696C6C20626520706C6163656420696E20612022436F6D706C65746564222073746174652C20616E6420697320726561647920746F20626520696E766F696365642E','bottom');
";

$installer->run($installSql);

$installer->endSetup();